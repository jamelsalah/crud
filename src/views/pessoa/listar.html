<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Listar Pessoas</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function redirect() { window.location.href = "/pessoa/cadastrar"}
        function deletar(id) {
            console.log(id)
            if (confirm(`Tem certeza que deseja deletar a pessoa de id ${id}?`)) {
                fetch(`/pessoa/deletar/${id}`)
                    .then(response => {
                    // Manipule a resposta aqui
                    })
                    .catch(error => {
                    // Manipule erros aqui
                    });
                location.reload();
            }
        }
    </script>
    <style>
        .newButton {
            width: 70px;
            margin-right: 50px;
        }
        .deleteButton{
            cursor: pointer;
        }
    </style>
</head>

<body>

    <div class="container mt-5">

        {{#erro}}
        <div class="alert alert-danger alert-dismissible">
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            <strong>{{erro}}</strong> não foi possível concluir o lista de cadastros.
        </div>
        {{/erro}}
        
    
        <h1>Lista de Pessoas</h1>

        <div class="row justify-content-md-end">
            <button class="btn btn-primary newButton" onclick="redirect()">
                New
            </button>
        </div>

        <br>

        <div class="row">
            <div class="col-12">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>id</th>
                            <th>Nome</th>
                            <th>Sobrenome</th>
                            <th>CPF</th>
                            <th>e-mail</th>
                            <th>telefone</th>
                            <th>altura</th>
                            <th>peso</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    
                    <tbody>
                        {{#pessoas}}
                        <tr>
                            <td>{{id}}</td>
                            <td>{{nome}}</td>
                            <td>{{sobrenome}}</td>
                            <td>{{cpf}}</td>
                            <td>{{email}}</td>
                            <td>{{telefone}}</td>
                            <td>{{altura}}</td>
                            <td>{{peso}}</td>
                            <td><a href="/pessoa/editar/{{id}}"><img src="../../assets/editIcon.png" width="22" height="22"></a></td>
                            <td><img src="../../assets/deleteIcon.png" class="deleteButton" width="22" height="22" onclick="deletar('{{id}}')"></td>
                        </tr>
                        {{/pessoas}}
                    </tbody>
                </table>
            </div>
        </div>

        <br>
        <div class="row justify-content-md-end">
            <button class="btn btn-primary newButton" onclick="redirect()">
                New
            </button>
        </div>
    </div>

</body>

</html>